language: node_js
sudo: true
node_js:
  - stable
before_install:
  - sudo add-apt-repository ppa:ondrej/php5-5.6 -y
  - sudo apt-get update
  - sudo apt-get install curl php5 -y
  - sudo apt-get install curl php5-cli git -y
  - curl -sS https://getcomposer.org/installer | sudo php -- --install-dir=/usr/local/bin --filename=composer
  - composer
install:
  - npm install gulp -g
  - npm install
before_script:
  # Install PHPCS to check for Drupal coding standards.
  - travis_retry sudo composer global require drupal/coder
  - ~/.composer/vendor/bin/phpcs --config-set installed_paths ~/.composer/vendor/drupal/coder/coder_sniffer
script:
  # Default gulp is configured to run csslint and eslint.
  - gulp
  # Check for coding standards violations
  - cd docroot/sites/all/modules/custom && ~/.composer/vendor/bin/phpcs
